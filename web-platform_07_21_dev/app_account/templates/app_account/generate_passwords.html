{% extends "components/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

<!-- Head -->
{% block head %}
    {% include 'components/navbar.html' %}
{% endblock head %}

<!-- Title -->
{% block title %}
    Сгенерировать пароли для аккаунтов
{% endblock title %}

<!-- Style -->   
{% block style %}{% endblock style %}

<!-- Header -->
{% block header %}{% endblock header %}

<!-- Main -->
{% block main %}

{% if generate_passwords_form %}

    <div>
        <br>
        <h1 class="product_title text-center">
        Создать пароли
        </h1>
        <br>
        <div class="col-9 col-sm-9 col-md-6 col-lg-5 mx-auto bg-light">
            <br>
            <div class="d-flex m-1 p-1">
                <p>Заполните поля и нажмите, чтобы сгенерировать файл с паролями:</p>
            </div>

        {% if result_generate_passwords %}
            <br>
            <div class="d-flex m-1 p-1">
                <p>Пароли успешно сгенерированы, нажмите ниже, чтобы скачать!</p>
            </div>
            <br>
            <a class="btn btn-dark" href="{% static 'media/data/accounts/generate_passwords.xlsx' %}">Скачать результат генерации</a>
            <a class="btn btn-outline-secondary" href="{% url 'app_account:generate_passwords' %}">Сгенерировать ещё раз</a>
            <br>
        {% else %}
            <form class="form-control" action="{% url 'app_account:generate_passwords' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <p>{{generate_passwords_form|crispy}}</p>
                <br>
                <div class="btn-group form-control">
                    <button class="btn btn-lg btn-outline-primary" type="submit">Сгенерировать</button>
                </div>
            </form>
        {% endif %}
    </div>

{% else %}

    <div class="mx-auto container">
        <br>
        <h1 class="product_title text-center">
            Данные не получены с сервера!
        </h1>
        <br>
        <div class="container-fluid text-center">
            <a class="btn btn-lg btn-success" href="{% url 'home' %}">Вернуться</a>
        </div>
    </div>

{% endif %}

{% endblock main %}

<!-- Footer -->
{% block footer %}
    {% include 'components/footer.html' %}
{% endblock footer %}

<!-- Script -->
{% block script %}{% endblock script %}
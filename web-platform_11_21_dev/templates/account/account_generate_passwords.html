{% extends "components/base.html" %}
{% load static %}
{% load crispy_forms_tags %}
{% load crispy_forms_filters %}

<!-- Head -->
{% block head %}
    {% include 'components/navbar.html' %}
{% endblock head %}

<!-- Title -->
{% block title %}
    Сгенерировать пароли
{% endblock title %}

<!-- Style -->
{% block style %}{% endblock style %}

<!-- Header -->
{% block header %}{% endblock header %}

<!-- Main -->
{% block main %}

<main class="container-fluid mx-auto text-center d-block">

    {% if result_form %}

        <div class="p-sm-5 text-white rounded bg-dark">
            <h1 class="display-4">Успешно выполнено</h1>
            <p class="lead">Операция успешно выполнена, вернитесь на главную или повторите операцию</p>
            <a class="btn btn-outline-light" href="{% static 'media/data/account/generate_passwords.xlsx' %}">Скачать результат выгрузки</a>
            <div class="btn-group btn-group-lg" role="group" aria-label="Basic mixed styles example">
              <a class="btn btn-success active" aria-current="page" href="{% url 'home' %}">Главная</a>
              <a type="button" class="btn btn-warning" href="{% url 'account_generate_passwords' %}">Повторить</a>
            </div>
        </div>

        {% if data %}

            <div class="pricing-header px-2 py-2 pt-md-2 pb-md-4 mx-auto text-center">
                <h1 class="display-4">Текущие данные.</h1>
                <p class="lead">Ниже расположены данные, соответствующие текущему значению.</p>
                <div class="d-block">
                    <div class="border-dark table-bordered">
                        <table class="table table-bordered border-dark table-striped table-hover table-responsive col-form-label-lg table-sm">
                            <thead>
                                <tr>
                                    {% for arr_2 in data.0 %}
                                        <th>{{ arr_2 }}</th>
                                    {% endfor %}
                                </tr>
                            </thead>
                            <tbody>
                                {% for arr_1 in data.1 %}
                                    <tr>
                                        {% for arr_2 in arr_1 %}
                                            <td>{{ arr_2 }}</td>
                                        {% endfor %}
                                    </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

        {% else %}

            <div class="pricing-header px-2 py-2 pt-md-2 pb-md-4 mx-auto text-center">
                <h1 class="display-4">Данных нет.</h1>
                <p class="lead">Перезагрузите страницу или ожидайте исправления неполадок.</p>
            </div>

        {% endif %}

    {% else %}

            {% if form %}

                <div class="p-sm-5 text-white rounded bg-dark">
                    <h1 class="display-1 fst-italic">Сгенерировать пароли</h1>
                    <p class="display-5">Эта страница содержит форму для генерации паролей на страницу и в excel файл-шаблон.
                        <p class="display-6">Нажмите подтвердить и затем скачайте файл.</p>
                    </p>
                </div>

                <form class="form-control" action="{% url 'account_generate_passwords' %}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <p>{{ form|crispy }}</p>
                    <div class="btn-group form-control">
                        <button class="btn btn-lg btn-outline-primary" type="submit">Подтвердить</button>
                    </div>
                </form>


            {% else %}

                <div class="pricing-header px-2 py-2 pt-md-2 pb-md-4 mx-auto text-center">
                    <h1 class="display-4">Данных нет.</h1>
                    <p class="lead">Перезагрузите страницу или ожидайте исправления неполадок.</p>
                </div>

            {% endif %}

    {% endif %}

</main>

{% endblock main %}

<!-- Footer -->
{% block footer %}
    {% include 'components/footer.html' %}
{% endblock footer %}

<!-- Script -->
{% block script %}{% endblock script %}







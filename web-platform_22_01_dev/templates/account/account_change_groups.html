{% extends "components/base.html" %}
{% load static %}

<!-- Head -->
{% block head %}
    {% include 'components/navbar.html' %}
{% endblock head %}

<!-- Title -->
{% block title %}
    Изменить группы
{% endblock title %}

<!-- Style -->
{% block style %}{% endblock style %}

<!-- Header -->
{% block header %}{% endblock header %}

<!-- Main -->
{% block main %}



<div class="text-center">
    <h1 class="display-6 fst-italic">Изменить группы</h1>
    <small class="text-secondary">Эта страница содержит форму для изменения групп пользователей.</small>
</div>

{% if response == 1 %}

    {% include 'components/success.html' %}

{% elif response == -1 %}

    {% include 'components/aborted.html' %}

{% else %}

    <div class="accordion" id="accordionExample">
        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_3">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_3"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_3"
                >список всех действий</button>
            </h2>
            <div
                id="accordion_collapse_3"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_3"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <ol class="list-group list-group-numbered">
                        {% for action in actions %}
                            <li class="list-group-item">{{ action.name_char_field }} / {{ action.name_slug_field }}</li>
                        {% endfor %}
                    </ol>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_1">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_1"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_1"
                >список всех групп с доступными действиями</button>
            </h2>
            <div
                id="accordion_collapse_1"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_1"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <ol class="list-group list-group-numbered">
                        {% for group in groups %}
                            <li class="list-group-item">
                                <strong>{{ group }}</strong>
                                <ul class="list-group list-group-flush">
                                    {% for action in group.group_one_to_one_field.action_many_to_many_field.all %}
                                        <li class="list-group-item">{{ action.name_char_field }} / {{ action.name_slug_field }}</li>
                                    {% endfor %}
                                </ul>
                            </li>
                        {% endfor %}
                    </ol>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_2">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_2"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_2"
                >примеры форм</button>
            </h2>
            <div
                id="accordion_collapse_2"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_2"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <div>

                        <hr/>

                        <label class="form-control-lg">
                            select:
                            <select type="select"
                                    id="select"
                                    name="select[]"
                                    required=""
                {#                                            size="3"#}
                {#                                            multiple="multiple"#}
                                    class="form-control form-control-lg"
                            >
                                <option selected disabled>Выберите группу</option>
                                {% for group in groups %}
                                    <option value="{{ group.group_one_to_one_field.name_slug_field }}">{{ group.group_one_to_one_field.name_char_field }}</option>
                                {% endfor %}
                            </select>
                            <small class="text-muted">select: выбрать один из списка</small>
                        </label>

                        <label class="form-control-lg">
                            multi_select:
                            <select type="select"
                                    id="multi_select"
                                    name="multi_select[]"
                                    required=""
                                    size="3"
                                    multiple="multiple"
                                    class="form-control form-control-lg"
                            >
                                <option selected disabled>Выберите группу</option>
                                {% for group in groups %}
                                    <option value="{{ group.group_one_to_one_field.name_slug_field }}">{{ group.group_one_to_one_field.name_char_field }}</option>
                                {% endfor %}
                            </select>
                            <small class="text-muted">multi_select: выбрать несколько из списка</small>
                        </label>

                        <label class="form-control-lg">
                            text:
                            <input type="text"
                                   id="groups"
                                   name="groups"
                {#                       required=""#}
                                   placeholder=""
                                   {% if user %}
                                        value="{% for group in groups %}{{ group.group_one_to_one_field.name_char_field }}, {% endfor %}"
                                   {% else %}
                                        value="{% for group in groups %}{{ group.group_one_to_one_field.name_char_field }}, {% endfor %}"
                                   {% endif %}
                                   minlength="1"
                                   maxlength="64"
                                   class="form-control form-control-lg"
                            />
                            <small class="text-muted">введите, из списка выше и через запятую, необходимые
                                группы доступа для пользователя</small>
                        </label>

                        <div>
                            <label class="form-control-lg">
                                checkbox:
                                {% for group in groups %}
                                    <div class="form-check form-switch form-control-lg">
                                        <input type="checkbox"
                                               id="{{ group.group_one_to_one_field.name_slug_field }}"
                                               name="{{ group.group_one_to_one_field.name_slug_field }}"
                {#                                   required=""#}
                                               value=""
                                               {% if group %}
                                                    checked="checked"
                                               {% else %}
                {#                                   checked="checked"#}
                                               {% endif %}
                                               class="form-check-input"
                                        />
                                        <label class="form-check-label" for="{{ group.group_one_to_one_field.name_slug_field }}">{{ group.group_one_to_one_field.name_char_field }}</label>
                                    </div>
                                {% endfor %}
                                <small class="text-muted">введите, из списка выше и через запятую, необходимые
                                    группы доступа для пользователя</small>
                            </label>
                        </div>

                        <hr/>

                    </div>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_4">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_4"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_4"
                >готовая форма для добавления к пользователю группы и добавления действия к этой группе</button>
            </h2>
            <div
                id="accordion_collapse_4"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_4"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <form action="{% url 'account_change_groups' %}"
                          method="POST"
                          target="_self"
                          enctype="multipart/form-data"
                          name="account_create_accounts one"
                          autocomplete="on"
                          class="text-center"
                    >
                        {% csrf_token %}
                        <div>
                            <div>
                                <label class="form-control-lg">
                                    Имя пользователя:
                                    <input type="text"
                                           id="username"
                                           name="username"
                                           required=""
                                           placeholder="970801351179"
                                           value="Bogdan"
                                           minlength="1"
                                           maxlength="12"
                                           class="form-control form-control-lg"
                                    />
                                    <small class="text-muted">User.objects.get(username=username)</small>
                                </label>
                            </div>
                            <div>
                                <label class="form-control-lg">
                                    Название группы:
                                    <input type="text"
                                           id="group_name_char_field"
                                           name="group_name_char_field"
                                           required=""
                                           placeholder="Пользователь"
                                           value="Пользователь"
                                           minlength="1"
                                           maxlength="32"
                                           class="form-control form-control-lg"
                                    />
                                    <small class="text-muted">GroupModel:name_char_field</small>
                                </label>

                                <label class="form-control-lg">
                                    Валидация группы:
                                    <input type="text"
                                           id="group_name_slug_field"
                                           name="group_name_slug_field"
                                           required=""
                                           placeholder="user"
                                           value="user"
                                           minlength="1"
                                           maxlength="32"
                                           class="form-control form-control-lg"
                                    />
                                    <small class="text-muted">GroupModel:name_slug_field</small>
                                </label>
                            </div>
                            <div>
                                <label class="form-control-lg">
                                    Название действия:
                                    <input type="text"
                                           id="action_name_char_field"
                                           name="action_name_char_field"
                                           required=""
                                           placeholder="Банк идей"
                                           value="Банк идей"
                                           minlength="1"
                                           maxlength="32"
                                           class="form-control form-control-lg"
                                    />
                                    <small class="text-muted">ActionModel:name_char_field</small>
                                </label>

                                <label class="form-control-lg">
                                    Валидация действия:
                                    <input type="text"
                                           id="action_name_slug_field"
                                           name="action_name_slug_field"
                                           required=""
                                           placeholder="idea"
                                           value="idea"
                                           minlength="1"
                                           maxlength="32"
                                           class="form-control form-control-lg"
                                    />
                                    <small class="text-muted">ActionModel:name_slug_field</small>
                                </label>
                            </div>

                        </div>
                        <hr/>
                        <!-- Grid row -->
                        <div class="container-fluid btn-group row pb-1">
                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="submit"
                                        class="w-100 form-control btn btn-lg btn-outline-primary"
                                >Подтвердить</button>
                            </div>
                            <!-- Grid column -->

                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="reset"
                                        class="w-100 form-control btn btn-lg btn-outline-warning"
                                >Сбросить</button>
                            </div>
                            <!-- Grid column -->
                        </div>
                        <!-- Grid row -->
                    </form>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_5">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_5"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_5"
                >готовая форма для присоединения действия к группе</button>
            </h2>
            <div
                id="accordion_collapse_5"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_5"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <form action="{% url 'account_change_groups' %}"
                          method="POST"
                          target="_self"
                          enctype="multipart/form-data"
                          name="account_create_accounts one"
                          autocomplete="on"
                          class="text-center"
                    >
                        {% csrf_token %}
                        <div>
                            <label class="form-control-lg">
                                Выберите группу, к которой нужно добавить действие:
                                <select type="select"
                                        id="select"
                                        name="select[]"
                                        required=""
{#                                        size="3"#}
{#                                        multiple="multiple"#}
                                        class="form-control form-control-lg"
                                >
                                    <option selected disabled>Выберите группу</option>
                                    {% for group in groups %}
                                        <option value="{{ group.group_one_to_one_field.name_slug_field }}">{{ group.group_one_to_one_field.name_char_field }}</option>
                                    {% endfor %}
                                </select>
                                <small class="text-muted">нажмите и выберите один из элементов из выпадающего списка</small>
                            </label>

                            <label class="form-control-lg">
                                Выберите действие, которое нужно добавить к группе:
                                <select type="select"
                                        id="select"
                                        name="select[]"
                                        required=""
{#                                        size="3"#}
{#                                        multiple="multiple"#}
                                        class="form-control form-control-lg"
                                >
                                    <option selected disabled>Выберите действие</option>
                                    {% for action in actions %}
                                        <option value="{{ action.name_slug_field }}">{{ action.name_char_field }}</option>
                                    {% endfor %}
                                </select>
                                <small class="text-muted">нажмите и выберите один из элементов из выпадающего списка</small>
                            </label>
                        </div>
                        <hr/>
                        <!-- Grid row -->
                        <div class="container-fluid btn-group row pb-1">
                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="submit"
                                        class="w-100 form-control btn btn-lg btn-outline-primary"
                                >Подтвердить</button>
                            </div>
                            <!-- Grid column -->

                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="reset"
                                        class="w-100 form-control btn btn-lg btn-outline-warning"
                                >Сбросить</button>
                            </div>
                            <!-- Grid column -->
                        </div>
                        <!-- Grid row -->
                    </form>

                </div>
            </div>
        </div>

        <div class="accordion-item">
            <h2 class="accordion-header" id="accordion_heading_6">
                <button
                    class="accordion-button collapsed"
                    type="button"
                    data-bs-toggle="collapse"
                    data-bs-target="#accordion_collapse_6"
                    aria-expanded="false"
                    aria-controls="accordion_collapse_6"
                >готовая форма для удаления действия из группы</button>
            </h2>
            <div
                id="accordion_collapse_6"
                class="accordion-collapse collapse"
                aria-labelledby="accordion_collapse_6"
                data-bs-parent="#accordionExample"
            >
                <div class="accordion-body">

                    <form action="{% url 'account_change_groups' %}"
                          method="POST"
                          target="_self"
                          enctype="multipart/form-data"
                          name="account_create_accounts one"
                          autocomplete="on"
                          class="text-center"
                    >
                        {% csrf_token %}
                        <div>
                            <label class="form-control-lg">
                                Выберите группу, из которой нужно удалить действие:
                                <select type="select"
                                        id="select"
                                        name="select[]"
                                        required=""
{#                                        size="3"#}
{#                                        multiple="multiple"#}
                                        class="form-control form-control-lg"
                                >
                                    <option selected disabled>Выберите группу</option>
                                    {% for group in groups %}
                                        <option value="{{ group.group_one_to_one_field.name_slug_field }}">{{ group.group_one_to_one_field.name_char_field }}</option>
                                    {% endfor %}
                                </select>
                                <small class="text-muted">нажмите и выберите один из элементов из выпадающего списка</small>
                            </label>

                            <label class="form-control-lg">
                                Выберите действие, которое нужно удалить из группы:
                                <select type="select"
                                        id="select"
                                        name="select[]"
                                        required=""
{#                                        size="3"#}
{#                                        multiple="multiple"#}
                                        class="form-control form-control-lg"
                                >
                                    <option selected disabled>Выберите действие</option>
                                    {% for action in actions %}
                                        <option value="{{ action.name_slug_field }}">{{ action.name_char_field }}</option>
                                    {% endfor %}
                                </select>
                                <small class="text-muted">нажмите и выберите один из элементов из выпадающего списка</small>
                            </label>
                        </div>
                        <hr/>
                        <!-- Grid row -->
                        <div class="container-fluid btn-group row pb-1">
                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="submit"
                                        class="w-100 form-control btn btn-lg btn-outline-primary"
                                >Подтвердить</button>
                            </div>
                            <!-- Grid column -->

                            <!-- Grid column -->
                            <div class="col-lg-6">
                                <button href=""
                                        type="reset"
                                        class="w-100 form-control btn btn-lg btn-outline-warning"
                                >Сбросить</button>
                            </div>
                            <!-- Grid column -->
                        </div>
                        <!-- Grid row -->
                    </form>

                </div>
            </div>
        </div>
    </div>

{% endif %}



{% endblock main %}

<!-- Footer -->
{% block footer %}
    {% include 'components/footer.html' %}
{% endblock footer %}

<!-- Script -->
{% block script %}{% endblock script %}
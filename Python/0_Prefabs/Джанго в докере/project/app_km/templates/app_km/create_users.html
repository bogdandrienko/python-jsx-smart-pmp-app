{% extends "components/base.html" %}
{% load static %}
{% load crispy_forms_tags %}

<!-- Head -->
{% block head %}
    {% include 'components/navbar.html' %}
{% endblock head %}

<!-- Title -->
{% block title %}
    Создать/изменить пользователей
{% endblock title %}

<!-- Style -->   
{% block style %}{% endblock style %}

<!-- Header -->
{% block header %}{% endblock header %}

<!-- Main -->
{% block main %}

{% if create_users_form %}

    <div>
        <br>
        <h1 class="product_title text-center">
        Создать/изменить пользователей
        </h1>
        <br>
        <div class="col-9 col-sm-9 col-md-6 col-lg-5 mx-auto bg-light">
            <br>
            <div class="d-flex m-1 p-1">
                <p>Выберите файл и нажмите, чтобы создать новых или изменить пользователей:</p>
                <a class="btn btn-dark" href="{% static 'media/data/accounts/create_users.xlsx' %}">Скачать шаблон добавления/изменения пользователей</a>
            </div>
            <br>
        {% if result_create_users %}
            <br>
            <div class="d-flex m-1 p-1">
                <p>Пользователи успешно созданы/изменены!</p>
            </div>
            <br>
            <a class="btn btn-outline-secondary" href="{% url 'app_km:create_users' %}">Сгенерировать ещё раз</a>
            <br>
        {% else %}
            <form class="form-control" action="{% url 'app_km:create_users' %}" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <p>{{create_users_form|crispy}}</p>
                <br>
                <div class="btn-group form-control">
                    <button class="btn btn-lg btn-outline-primary" type="submit">Создать</button>
                </div>
            </form>
        {% endif %}
    </div>

{% else %}

    <div class="mx-auto container">
        <br>
        <h1 class="product_title text-center">
            Данные не получены с сервера!
        </h1>
        <br>
        <div class="container-fluid text-center">
            <a class="btn btn-lg btn-success" href="{% url 'home' %}">Вернуться</a>
        </div>
    </div>

{% endif %}

{% endblock main %}

<!-- Footer -->
{% block footer %}
    {% include 'components/footer.html' %}
{% endblock footer %}

<!-- Script -->
{% block script %}{% endblock script %}